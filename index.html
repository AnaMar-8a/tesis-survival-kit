<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8">
<title>Sustentación Maestría - Gobernanza TI</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="Presentación de Tesis de Maestría en Gobierno de TI - Uninorte">

<!-- =========================================
     RECURSOS EXTERNOS
     ========================================= -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Source+Sans+3:wght@400;500;600&family=Source+Serif+4:wght@500;600&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<style>
/* =========================================
   1. SISTEMA DE DISEÑO
   ========================================= */
:root {
  /* Paleta */
  --accent-uninorte: #C4122F;  
  --green-deep:      #1F3B37;  
  --green-mid:       #3E7C74;  
  --green-soft:      #6F9E96;  
  
  --bg-main:         #FFFFFF;
  --bg-panel:        #F5F6F6;
  --text-main:       #121212;
  --text-muted:      #4A4A4A;
  --line-soft:       rgba(0,0,0,.14); 

  /* Tipografía */
  --font-title: "Source Serif 4", serif;
  --font-body:  "Source Sans 3", sans-serif;

  /* Espaciado */
  --radius:   24px; 
  --space-lg: 40px; 
  --space-md: 20px; 
  --space-sm: 12px; 

  /* Animaciones */
  --trans-slide:  0.6s cubic-bezier(0.22, 1, 0.36, 1);
  --trans-ui:     0.2s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

/* =========================================
   2. ESTILOS BASE
   ========================================= */
body { margin: 0; font-family: var(--font-body); background-color: #d8d8d8; color: var(--text-main); overflow: hidden; font-size: 17px; }
*:focus-visible { outline: 3px solid var(--accent-uninorte); outline-offset: 4px; }
#app { width: 100vw; height: 100vh; display: flex; justify-content: center; align-items: center; position: relative; background-color: #dcdcdc; }
.noise-bg { position: fixed; inset: 0; pointer-events: none; z-index: 0; opacity: 0.025; background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.7' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)'/%3E%3C/svg%3E"); }

/* =========================================
   3. SLIDES
   ========================================= */
section.slide {
  display: none; position: absolute;
  width: 90%; height: 85%; max-width: 1600px;
  background: var(--bg-main); padding: var(--space-lg);
  box-sizing: border-box; opacity: 0;
  border-radius: var(--radius);
  box-shadow: 0 25px 50px rgba(0,0,0,0.12);
  border-top: 6px solid var(--accent-uninorte);
  overflow-y: auto; scrollbar-width: thin; scrollbar-color: var(--green-mid) #f0f0f0;
  transform: translate3d(0, 30px, 0); 
  transition: opacity var(--trans-slide), transform var(--trans-slide);
  z-index: 1;
}
section.slide.active { display: flex; flex-direction: column; justify-content: center; opacity: 1; z-index: 2; transform: translate3d(0, 0, 0); }
section.slide.active.overflowing { justify-content: flex-start; }

/* Tipografía */
h1, h2 { font-family: var(--font-title); font-weight: 600; color: var(--green-deep); margin-top: 0; }
.text-h1 { font-size: 3.2rem; line-height: 1.1; margin-bottom: var(--space-md); }
.text-h2 { font-size: 2.5rem; margin-bottom: var(--space-lg); position: relative; display: inline-block; }
.text-h2::after { content: ''; display: block; width: 60px; height: 4px; background: var(--green-mid); margin-top: 12px; border-radius: 2px; }
.text-h3 { font-family: var(--font-body); font-size: 1.4rem; font-weight: 600; color: var(--green-deep); margin-bottom: var(--space-sm); }
.text-body { font-size: 1.25rem; line-height: 1.5; color: var(--text-main); }
.text-label { font-size: 0.9rem; font-weight: 600; text-transform: uppercase; letter-spacing: 1px; color: var(--green-mid); }
.color-accent { color: var(--accent-uninorte); }

/* Layouts */
.grid-2 { display: grid; grid-template-columns: 1.1fr 0.9fr; gap: 40px; align-items: center; height: 100%; width: 100%; }
.grid-4 { display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; width: 100%; }
.flex-col { display: flex; flex-direction: column; width: 100%; }
.flex-row { display: flex; align-items: center; gap: 20px; }
.mt-lg { margin-top: 40px; }

/* Componentes */
.card-highlight { background: var(--bg-main); padding: 20px; margin-bottom: 15px; border-left: 4px solid var(--accent-uninorte); box-shadow: 0 4px 12px rgba(0,0,0,0.04); }
.img-wrapper { width: 100%; height: 100%; min-height: 350px; border-radius: var(--radius); overflow: hidden; position: relative; background: var(--bg-panel); display: flex; align-items: center; justify-content: center; box-shadow: inset 0 0 20px rgba(0,0,0,0.05); }
.img-cover { width: 100%; height: 100%; object-fit: cover; position: absolute; z-index: 0; transition: transform 0.5s ease; }
.img-fallback { position: absolute; inset: 0; z-index: 0; display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center; background: var(--bg-panel); }
.scrim { position: absolute; inset: 0; background: linear-gradient(135deg, var(--green-deep) 0%, rgba(31, 59, 55, 0.95) 100%); z-index: 1; transition: opacity 0.4s ease; }
.content-overlay { position: relative; z-index: 2; padding: 2rem; text-align: center; color: white; display: flex; flex-direction: column; justify-content: center; height: 100%; transition: opacity 0.4s ease, transform 0.4s ease; }
.interactive-overlay { cursor: zoom-in; }
.interactive-overlay:hover .scrim { opacity: 0; }
.interactive-overlay:hover .content-overlay { opacity: 0; transform: scale(1.1); }
.interactive-overlay:hover .img-cover { transform: scale(1.02); }
.divider { width: 100%; height: 1px; background: var(--line-soft); margin: 20px 0; }
.list-custom li { list-style: none; position: relative; padding-left: 28px; margin-bottom: 10px; font-size: 1.35rem; }
.list-custom li::before { content: ''; position: absolute; left: 0; top: 0.6em; width: 8px; height: 8px; border-radius: 50%; background: var(--green-mid); }

/* --- TABLA & MADUREZ --- */
.table-container { width: 100%; }
.wow-table { width: 100%; border-collapse: separate; border-spacing: 0 10px; }
.wow-table th { text-align: left; font-size: 0.85rem; text-transform: uppercase; color: var(--green-mid); padding: 0 20px 5px; }
.wow-table-row { background: white; box-shadow: 0 4px 10px rgba(0,0,0,0.03); transition: transform 0.2s; }
.wow-table-row:hover { transform: translateX(5px); border-left: 3px solid var(--accent-uninorte); }
.wow-table td { padding: 12px 20px; vertical-align: middle; }
.wow-table tr td:first-child { border-radius: 12px 0 0 12px; }
.wow-table tr td:last-child { border-radius: 0 12px 12px 0; }
.code-badge { font-weight: 700; color: var(--accent-uninorte); background: rgba(196, 18, 47, 0.05); padding: 6px 10px; border-radius: 8px; font-size: 0.85rem; }
.dim-text { font-size: 1rem; font-weight: 500; color: var(--text-main); line-height: 1.3; }
.level-container { display: flex; align-items: center; gap: 15px; width: 100%; max-width: 180px; }
.level-num { font-weight: 700; color: var(--text-main); width: 15px; font-size: 0.9rem; }
.progress-track { flex-grow: 1; height: 8px; background: #eee; border-radius: 4px; overflow: hidden; margin-top: 5px; }
.progress-fill { height: 100%; width: 0; transition: width 1s; }
.fill-1 { background: #E33E33; } .fill-2 { background: #FFC107; } .fill-3 { background: #2E7D32; }

/* --- RESULTADOS GRID --- */
.results-grid { display: grid; grid-template-columns: repeat(3, 1fr); grid-template-rows: auto auto 1fr; gap: 20px; height: 100%; }
.result-card { background: white; border-radius: 16px; padding: 25px; box-shadow: 0 4px 15px rgba(0,0,0,0.05); border: 1px solid rgba(0,0,0,0.03); display: flex; flex-direction: column; overflow: hidden; position: relative; transition: transform 0.3s; }
.result-card:hover { transform: translateY(-5px); z-index: 5; box-shadow: 0 15px 30px rgba(0,0,0,0.1); }
.score-card { grid-column: span 1; grid-row: span 2; background: linear-gradient(145deg, var(--green-deep), #2a4f4a); color: white; align-items: center; text-align: center; justify-content: center; }
.big-score { font-size: 5rem; font-weight: 700; margin: 20px 0; line-height: 1; }
.rc-title { font-family: var(--font-title); font-size: 1.2rem; font-weight: 600; color: var(--green-deep); margin-bottom: 10px; display: flex; align-items: center; gap: 10px; }
.score-card .rc-title { color: rgba(255,255,255,0.9); }
.score-detail { background: rgba(255,255,255,0.1); padding: 10px 15px; border-radius: 12px; margin-top: 10px; width: 100%; }
.alert-badge { background: #E33E33; color: white; padding: 5px 12px; border-radius: 20px; font-size: 0.85rem; font-weight: 700; display: inline-block; margin-top: 5px; animation: pulse 2s infinite; }
.card-adaptation { grid-column: span 2; background: #fdfdfd; border-left: 5px solid var(--accent-uninorte); }
.adapt-content { display: flex; justify-content: space-between; align-items: center; gap: 30px; height: 100%; }
.adapt-main { flex: 0 0 40%; }
.adapt-grid { flex: 1; display: flex; flex-wrap: wrap; gap: 10px; }
.process-badge { background: white; border: 1px solid var(--green-mid); color: var(--green-deep); padding: 8px 16px; border-radius: 20px; font-size: 0.9rem; font-weight: 600; display: flex; align-items: center; gap: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.05); transition: all 0.2s; }
.process-badge:hover { background: var(--green-mid); color: white; transform: translateY(-2px); }
.card-implementation { grid-column: span 3; }
.rc-body { font-size: 0.95rem; line-height: 1.5; color: var(--text-muted); }

/* --- CICLO IMPLEMENTACIÓN --- */
.cycle-wrapper { position: relative; width: 100%; height: 100%; min-height: 150px; display: flex; justify-content: center; align-items: center; margin-top: 10px; }
.cycle-svg { position: absolute; width: 80%; height: 80%; top: 10%; left: 10%; pointer-events: none; }
.arrow-path { fill: none; stroke: var(--green-soft); stroke-width: 2; stroke-dasharray: 6; animation: dash 30s linear infinite; opacity: 0.5; }
@keyframes dash { to { stroke-dashoffset: -100; } }
.cycle-node { position: absolute; display: flex; flex-direction: column; align-items: center; text-align: center; width: 110px; z-index: 1; transition: transform 0.3s; }
.cycle-node:hover { transform: scale(1.1); z-index: 10; }
.c-icon { width: 50px; height: 50px; background: white; border: 3px solid var(--green-mid); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.2rem; color: var(--green-deep); margin-bottom: 8px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
.cycle-node:hover .c-icon { background: var(--green-mid); color: white; }
.c-text { font-size: 0.85rem; font-weight: 700; line-height: 1.2; color: var(--text-main); }
.node-1 { top: 0px; } .node-2 { bottom: 0px; right: 15%; } .node-3 { bottom: 0px; left: 15%; }

/* --- BENTO GRID CONCLUSIONES (Slide 10 - REDISEÑADO) --- */
.bento-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 25px; width: 100%; height: 100%; align-content: center; }
.bento-card {
    background: white; border-radius: 16px; padding: 25px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.05); display: flex; flex-direction: column;
    justify-content: flex-start; transition: transform 0.3s; border: 1px solid rgba(0,0,0,0.02);
}
.bento-card:hover { transform: translateY(-5px); box-shadow: 0 10px 25px rgba(0,0,0,0.1); }

/* Colores Bento */
.bg-deep { background: var(--green-deep); color: white; }
.bg-deep .bento-text { color: rgba(255,255,255,0.9); }
.bg-accent { background: var(--accent-uninorte); color: white; }
.bg-accent .bento-text { color: rgba(255,255,255,0.95); }
.bg-light { background: white; border-top: 4px solid var(--green-mid); }

.bento-icon { font-size: 2rem; margin-bottom: 15px; opacity: 0.9; }
.bento-title { font-family: var(--font-title); font-size: 1.25rem; margin-bottom: 10px; font-weight: 600; line-height: 1.2; }
.bento-text { font-size: 0.95rem; line-height: 1.5; }

/* Timeline Horizontal Limpia (Slide 10) */
.timeline-clean {
    display: flex; align-items: center; justify-content: space-between; position: relative; margin-top: 20px;
}
.timeline-clean::before {
    content: ''; position: absolute; top: 20px; left: 40px; right: 40px; height: 3px;
    background: #e0e0e0; z-index: 0;
}
.tl-step {
    position: relative; z-index: 1; display: flex; flex-direction: column; align-items: center; gap: 8px; text-align: center;
}
.tl-circle {
    width: 40px; height: 40px; background: white; border: 3px solid var(--green-mid);
    border-radius: 50%; color: var(--green-mid); font-weight: 700;
    display: flex; align-items: center; justify-content: center;
    transition: all 0.3s;
}
.tl-step:hover .tl-circle { background: var(--green-mid); color: white; transform: scale(1.2); }
.tl-label { font-size: 0.85rem; font-weight: 700; color: var(--green-deep); }

/* Span Full */
.span-full { grid-column: span 2; }

/* --- ANIMACIONES --- */
.reveal { opacity: 0; transform: translateY(15px); transition: all 0.7s ease; }
.slide.active .reveal:nth-child(1) { transition-delay: 0.1s; opacity: 1; transform: translateY(0); }
.slide.active .reveal:nth-child(2) { transition-delay: 0.2s; opacity: 1; transform: translateY(0); }
.slide.active .reveal:nth-child(3) { transition-delay: 0.3s; opacity: 1; transform: translateY(0); }
.slide.active .reveal:nth-child(4) { transition-delay: 0.4s; opacity: 1; transform: translateY(0); }

/* Animación Específica */
.slide.active .wow-table-row { opacity: 0; animation: slideInLeft 0.8s ease forwards; }
.slide.active .progress-fill { animation: growBar 1s cubic-bezier(0.22, 1, 0.36, 1) forwards; animation-delay: 1s; }
.slide.active .result-card, .slide.active .bento-card { opacity: 0; animation: fadeUp 0.6s ease forwards; }

.slide.active .result-card:nth-child(1) { animation-delay: 0.2s; }
.slide.active .result-card:nth-child(2) { animation-delay: 0.4s; }
.slide.active .result-card:nth-child(3) { animation-delay: 0.5s; }
.slide.active .result-card:nth-child(4) { animation-delay: 0.6s; }
.slide.active .result-card:nth-child(5) { animation-delay: 0.7s; }

.slide.active .wow-table-row:nth-child(1) { animation-delay: 0.3s; }
.slide.active .wow-table-row:nth-child(2) { animation-delay: 0.6s; }
.slide.active .wow-table-row:nth-child(3) { animation-delay: 0.9s; }
.slide.active .wow-table-row:nth-child(4) { animation-delay: 1.2s; }
.slide.active .wow-table-row:nth-child(5) { animation-delay: 1.5s; }

.slide.active .wow-table-row:nth-child(1) .progress-fill { animation-delay: 0.9s; }
.slide.active .wow-table-row:nth-child(2) .progress-fill { animation-delay: 1.2s; }
.slide.active .wow-table-row:nth-child(3) .progress-fill { animation-delay: 1.5s; }
.slide.active .wow-table-row:nth-child(4) .progress-fill { animation-delay: 1.8s; }
.slide.active .wow-table-row:nth-child(5) .progress-fill { animation-delay: 2.1s; }

.slide.active .bento-card:nth-child(1) { animation-delay: 0.2s; }
.slide.active .bento-card:nth-child(2) { animation-delay: 0.3s; }
.slide.active .bento-card:nth-child(3) { animation-delay: 0.4s; }
.slide.active .bento-card:nth-child(4) { animation-delay: 0.5s; }
.slide.active .bento-card:nth-child(5) { animation-delay: 0.6s; }

@keyframes slideInLeft { from { opacity: 0; transform: translateX(-30px); } to { opacity: 1; transform: translateX(0); } }
@keyframes growBar { from { width: 0; } to { width: var(--w); } }
@keyframes fadeUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
@keyframes pulse { 0% { box-shadow: 0 0 0 0 rgba(227, 62, 51, 0.4); } 70% { box-shadow: 0 0 0 10px rgba(227, 62, 51, 0); } 100% { box-shadow: 0 0 0 0 rgba(227, 62, 51, 0); } }

/* --- CONTROLES --- */
.controls { position: absolute; bottom: 1.5rem; right: 2rem; display: flex; gap: 10px; padding: 6px; background: rgba(255, 255, 255, 0.85); backdrop-filter: blur(10px); border-radius: 50px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); z-index: 50; border: 1px solid rgba(255,255,255,0.5); }
.btn-nav { width: 48px; height: 48px; border: none; background: white; color: var(--green-deep); border-radius: 50%; font-size: 1.1rem; cursor: pointer; transition: 0.2s; display: flex; align-items: center; justify-content: center; }
.btn-nav:hover:not(:disabled) { background: var(--green-deep); color: white; transform: translateY(-2px); }
.btn-nav:disabled { opacity: 0.4; cursor: not-allowed; }
.progress-bar { position: absolute; top: 0; left: 0; height: 6px; background: var(--green-mid); width: 0; transition: width 0.5s; z-index: 100; }

/* Modal Bibliografía */
.modal-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.6); backdrop-filter: blur(5px); z-index: 2000; display: flex; justify-content: center; align-items: center; opacity: 0; pointer-events: none; transition: opacity 0.3s; }
.modal-overlay.open { opacity: 1; pointer-events: auto; }
.modal-content { background: white; width: 90%; max-width: 900px; height: 80%; border-radius: 20px; display: flex; flex-direction: column; padding: 30px; transform: translateY(20px); transition: transform 0.3s; }
.modal-overlay.open .modal-content { transform: translateY(0); }
.biblio-list { overflow-y: auto; padding-left: 20px; }
.biblio-list li { margin-bottom: 10px; padding-left: 1em; text-indent: -1em; font-size: 0.9rem; }
.btn-biblio { background: var(--green-deep); color: white; border: none; padding: 10px 25px; border-radius: 30px; cursor: pointer; display: inline-flex; align-items: center; gap: 10px; margin-top: 20px; font-weight: 600; }

/* Responsive */
@media (max-width: 1000px) {
  section.slide { padding: 20px; }
  .grid-2, .grid-4, .bento-grid, .results-grid { grid-template-columns: 1fr; display: flex; flex-direction: column; }
  .text-h1 { font-size: 2rem; }
  .img-wrapper { min-height: 200px; }
  .score-card, .card-adaptation, .card-implementation { grid-column: span 1; grid-row: span 1; }
  .cycle-wrapper { min-height: 250px; }
  .wow-table th { display: none; }
  .wow-table-row { display: flex; flex-direction: column; padding: 15px; margin-bottom: 10px; }
  .wow-table td { border: none; padding: 5px 0; }
  .span-full { grid-column: span 1; }
}
</style>
</head>

<body>
<div class="noise-bg"></div>
<div class="progress-bar" id="progressBar"></div>

<div id="app">
  
  <!-- 1. PORTADA -->
  <section class="slide active">
    <div class="reveal">
        <img src="assets/images/norte.png" alt="Logo Uninorte" style="height: 100px; display:block; margin-bottom: var(--space-md);" onerror="this.style.display='none'; document.getElementById('logo-fallback').style.display='block'">
        <h3 id="logo-fallback" class="text-label" style="display:none; color:var(--text-main); font-size:1.2rem;">UNIVERSIDAD DEL NORTE</h3>
    </div>
    <div class="mt-lg reveal">
        <h1 class="text-h1">Sistema para la gobernanza y gestión integral de TI</h1>
        <h3 class="text-h3" style="font-weight: 400; color:var(--green-mid);">En entes territoriales (Caso: Alcaldía de Santa Marta)</h3>
    </div>
    <div class="divider reveal"></div>
    <div class="grid-2 reveal" style="align-items: flex-end;">
        <div>
            <div style="margin-bottom: 24px;">
                <p class="text-label mb-2">Candidatos</p>
                <p style="font-family: var(--font-title); font-size:1.4rem; font-weight:600; margin:0 0 4px 0;">Catalina Molina Valencia</p>
                <p style="font-family: var(--font-title); font-size:1.4rem; font-weight:600; margin:0;">Jaime Emiro Críales</p>
            </div>
            <div>
                <p class="text-label mb-2">Director</p>
                <p style="font-family: var(--font-title); font-size:1.4rem; font-weight:600; margin:0;">Wilson Nieto</p>
            </div>
        </div>
        <div style="text-align: right;">
            <p class="text-label mb-2">Trabajo de Grado</p>
            <p style="font-weight: 600; color:var(--green-deep); margin-bottom:8px;">Maestría en Gobierno de TI</p>
            <p class="color-muted" style="font-size: 0.9rem;">BARRANQUILLA • 2025</p>
        </div>
    </div>
  </section>

  <!-- 2. INTRODUCCIÓN -->
  <section class="slide">
    <h2 class="text-h2">Introducción</h2>
    <div class="grid-2">
      <div class="reveal">
        <ul class="list-custom">
          <li><strong>Retos:</strong> Operación TI fragmentada y baja interoperabilidad.</li>
          <li><strong>Impacto:</strong> Trámites manuales y experiencias desconectadas.</li>
          <li><strong>Necesidad:</strong> Gobierno y gestión como habilitadores reales.</li>
          <li><strong>Propósito:</strong> Un sistema integrador con foco en el ciudadano.</li>
        </ul>
      </div>
      <div class="reveal img-wrapper">
           <div class="img-fallback">
               <div style="position:relative; width:160px; height:160px; background:white; border-radius:50%; display:grid; place-items:center;">
                   <i class="fas fa-users-gear" style="font-size:4rem; color:var(--green-deep);"></i>
               </div>
               <p class="text-label mt-lg" style="color:var(--accent-uninorte);">Foco Ciudadano</p>
           </div>
           <img src="assets/images/intro.jpg" class="img-cover" alt="Contexto Ciudadano" onerror="this.style.display='none'">
      </div>
    </div>
  </section>

  <!-- 3. PROBLEMA -->
  <section class="slide">
    <h2 class="text-h2">Problema</h2>
    <div class="grid-2">
      <div class="reveal flex-col">
        <div class="card-highlight">
            <strong class="color-accent text-label">Aislamiento</strong>
            <p class="text-body" style="margin-top:8px;">Sistemas aislados y procesos no estandarizados.</p>
        </div>
        <div class="card-highlight">
            <strong class="color-accent text-label">Opacidad</strong>
            <p class="text-body" style="margin-top:8px;">Limitaciones para decisiones basadas en datos.</p>
        </div>
        <div class="card-highlight">
            <strong class="color-accent text-label">Debilidad</strong>
            <p class="text-body" style="margin-top:8px;">Falta de dirección y monitoreo estratégico.</p>
        </div>
      </div>
      <div class="reveal img-wrapper" style="background: #FFF5F6;">
          <div class="img-fallback">
             <i class="fas fa-triangle-exclamation icon-lg" style="color:var(--accent-uninorte);"></i>
             <h3 class="text-h3" style="color:var(--accent-uninorte);">Consecuencias</h3>
             <p class="text-body">Inversiones reactivas, riesgos elevados y baja alineación.</p>
          </div>
          <img src="assets/images/problema.jpg" class="img-cover" alt="Problemática" onerror="this.style.display='none'">
      </div>
    </div>
  </section>

  <!-- 4. JUSTIFICACIÓN -->
  <section class="slide">
    <h2 class="text-h2">Justificación</h2>
    <div class="grid-2">
      <div class="reveal">
         <p class="text-body">Existe un <strong>déficit histórico</strong> de transformación digital por restricciones de capacidad.</p>
         <p class="text-body">Falta un <strong>marco sistemático</strong> aplicable a la realidad de los entes territoriales.</p>
         <p class="text-body"><strong>Relevancia:</strong> Mejora servicios al ciudadano, transparencia, control y confianza.</p>
      </div>
      <div class="reveal" style="padding: 20px; background: var(--green-deep); border-radius: var(--radius); color:white;">
         <h3 class="text-h3" style="color:white; border-bottom: 1px solid rgba(255,255,255,0.2); padding-bottom:10px;">El Aporte</h3>
         <p class="text-body" style="color:rgba(255,255,255,0.9);">Integración operable de:</p>
         <ul class="list-custom" style="color:white;">
             <li style="color:white;">Arquitectura Empresarial</li>
             <li style="color:white;">Gobierno & Gestión TI</li>
             <li style="color:white;">Regulación Vigente</li>
         </ul>
      </div>
    </div>
  </section>

  <!-- 5. OBJETIVOS -->
  <section class="slide">
    <h2 class="text-h2">Objetivos</h2>
    <div class="flex-col" style="height:100%;">
      <div class="reveal" style="border:1px solid var(--green-deep); padding:20px; margin-bottom: 20px; border-radius: var(--radius);">
        <span style="position:absolute; top:-14px; left:24px; background:var(--bg-main); padding:0 10px; font-weight:700; color:var(--accent-uninorte); font-size:0.9rem; letter-spacing:1px;">OBJETIVO GENERAL</span>
        <p style="font-family:var(--font-title); font-size:1.45rem; line-height:1.4; margin:0; color:var(--green-deep);">
            Diseñar un sistema para la gobernanza y gestión integral de las tecnologías de la Información para los entes territoriales que sirva como Impulsor para la transformación digital, el desarrollo de la arquitectura empresarial y alineada con los estándares internacionales y la regulación en Colombia.
        </p>
      </div>
      <div class="grid-4 reveal" style="align-items: start;">
          <div class="card-highlight" style="border-left-color: var(--green-mid); padding: 1.2rem;">
            <strong class="text-label" style="display:block; margin-bottom:8px;">Específico 1</strong>
            <p class="text-body" style="font-size:1.1rem; margin:0;">Identificar los componentes conceptuales claves de gobernanza y gestión integral de las tecnologías de la Información para los entes territoriales a partir de la revisión sistemática de la literatura.</p>
          </div>
          <div class="card-highlight" style="border-left-color: var(--green-mid); padding: 1.2rem;">
            <strong class="text-label" style="display:block; margin-bottom:8px;">Específico 2</strong>
            <p class="text-body" style="font-size:1.1rem; margin:0;">Estructurar el sistema gobernanza y gestión integral de las tecnologías de la Información para los entes territoriales.</p>
          </div>
          <div class="card-highlight" style="border-left-color: var(--green-mid); padding: 1.2rem;">
            <strong class="text-label" style="display:block; margin-bottom:8px;">Específico 3</strong>
            <p class="text-body" style="font-size:1.1rem; margin:0;">Validar el sistema de gobernanza y gestión integral de las tecnologías de la Información para los entes territoriales a través de un modelo de madurez.</p>
          </div>
          <div class="card-highlight" style="border-left-color: var(--green-mid); padding: 1.2rem;">
            <strong class="text-label" style="display:block; margin-bottom:8px;">Específico 4</strong>
            <p class="text-body" style="font-size:1.1rem; margin:0;">Desarrollar el caso de estudio gobernanza y gestión integral de las tecnologías de la Información para los entes territoriales.</p>
          </div>
      </div>
    </div>
  </section>

  <!-- 6. MARCO TEÓRICO -->
  <section class="slide">
    <h2 class="text-h2">Marco Teórico</h2>
    <div class="grid-2" style="align-items: start;">
      <div class="reveal table-container">
          <table class="wow-table" style="font-size: 0.85rem;">
            <thead>
              <tr>
                <th style="width: 35%;">Autor / Entidad</th>
                <th>Aporte clave</th>
              </tr>
            </thead>
            <tbody>
              <tr class="wow-table-row">
                <td style="font-weight: 700; color: var(--green-deep);">Rogers (2023)</td>
                <td>DX = cambio estratégico continuo; hoja de ruta en 5 pasos.</td>
              </tr>
              <tr class="wow-table-row">
                <td style="font-weight: 700; color: var(--green-deep);">Selig (2008a, b)</td>
                <td>Gobierno de TI como viaje de madurez con liderazgo y métricas.</td>
              </tr>
              <tr class="wow-table-row">
                <td style="font-weight: 700; color: var(--green-deep);">Weill & Ross (2004)</td>
                <td>Gobierno TI = derechos de decisión + rendición de cuentas.</td>
              </tr>
              <tr class="wow-table-row">
                <td style="font-weight: 700; color: var(--green-deep);">ISO/IEC 38500</td>
                <td>Gobierno corporativo TI: Evaluate–Direct–Monitor (EDM).</td>
              </tr>
              <tr class="wow-table-row">
                <td style="font-weight: 700; color: var(--green-deep);">COBIT 2019</td>
                <td>Distingue EDM (gobierno) vs Gestión (APO/BAI/DSS/MEA).</td>
              </tr>
              <tr class="wow-table-row">
                <td style="font-weight: 700; color: var(--green-deep);">MinTIC (Colombia)</td>
                <td>Marcos públicos para operacionalizar TI (IT4+, MGGTI).</td>
              </tr>
              <tr class="wow-table-row">
                <td style="font-weight: 700; color: var(--green-deep);">Kaplan & Norton</td>
                <td>Mapas estratégicos + BSC adaptados a valor público.</td>
              </tr>
              <tr class="wow-table-row">
                <td style="font-weight: 700; color: var(--green-deep);">Santini et al. (2024)</td>
                <td>Ecosistema de datos y decisiones basadas en evidencia.</td>
              </tr>
            </tbody>
          </table>
      </div>
      
      <div class="reveal img-wrapper" style="background: white; border: 1px solid rgba(0,0,0,0.05); min-height: 500px;">
          <div class="img-fallback">
              <i class="fas fa-project-diagram" style="font-size: 3rem; color: #ddd; margin-bottom: 10px;"></i>
              <p style="color: #999;">Diagrama del Marco Teórico</p>
          </div>
          <img src="assets/images/marco.png" class="img-cover" style="object-fit: contain; padding: 10px;" alt="Diagrama Marco Teórico" loading="lazy" onerror="this.style.display='none'">
      </div>
    </div>
  </section>

  <!-- 7. MODELO PROPUESTO -->
  <section class="slide">
    <h2 class="text-h2">Modelo Propuesto</h2>
    <div class="grid-2" style="grid-template-columns: 0.7fr 1.3fr;">
      <div class="reveal">
        <ul class="list-custom">
            <li><strong>Enfoque Sistémico:</strong> Articulación entre Gobierno Corporativo y TI.</li>
            <li><strong>Eje Central:</strong> El ciudadano (experiencia y valor público).</li>
            <li><strong>Componentes:</strong> Direccionamiento (CMI), Arquitectura y Procesos.</li>
            <li><strong>Capacidades:</strong> Servicios, proyectos, talento, calidad.</li>
            <li><strong>Control:</strong> Medición y madurez.</li>
        </ul>
      </div>
      
      <div class="reveal img-wrapper interactive-overlay" style="cursor: zoom-in; background: #333;">
          <div class="scrim" style="background: linear-gradient(135deg, rgba(31,59,55,0.98) 0%, rgba(62,124,116,0.9) 100%);"></div>
          
          <div class="content-overlay">
              <h3 class="text-h3" style="color:white; border-bottom:3px solid var(--accent-uninorte); padding-bottom:1rem; margin-bottom: 1.5rem;">La Clave</h3>
              <p style="font-family:var(--font-title); font-size:2rem; font-style:italic; margin:0; color: #fff; line-height: 1.4; text-shadow: 0 2px 10px rgba(0,0,0,0.5);">
                  "Traducir la estrategia institucional en ejecución técnica medible."
              </p>
              
              <div style="margin-top:2.5rem;">
                  <button class="btn-biblio" style="background: var(--accent-uninorte); border: none; font-size: 1.1rem; padding: 15px 30px; box-shadow: 0 10px 20px rgba(0,0,0,0.3); animation: pulse 2s infinite;">
                      <i class="fas fa-expand-arrows-alt"></i> Ver Diagrama del Modelo
                  </button>
              </div>
          </div>
          
          <img src="assets/images/modelo.jpg" class="img-cover" style="object-fit: contain;" alt="Diagrama del Modelo" loading="lazy" onerror="this.style.display='none'">
      </div>
    </div>
  </section>

  <!-- 8. CASO DE ESTUDIO -->
  <section class="slide">
    <h2 class="text-h2">Caso: Alcaldía de Santa Marta</h2>
    <div class="grid-2" style="grid-template-columns: 0.8fr 1.2fr;">
      <div class="reveal">
        <div class="flex-row mb-2">
            <div style="width:50px; height:50px; background:var(--bg-panel); border-radius:50%; display:grid; place-items:center; color:var(--accent-uninorte); flex-shrink:0;">
                <i class="fas fa-map-location-dot" style="font-size:1.2rem;"></i>
            </div>
            <div>
                <strong class="text-label" style="color:var(--text-main);">Caracterización</strong>
                <p class="text-body" style="margin:0; font-size:1.1rem;">Análisis del mapa de procesos real.</p>
            </div>
        </div>
        <div class="flex-row mb-2">
            <div style="width:50px; height:50px; background:var(--bg-panel); border-radius:50%; display:grid; place-items:center; color:var(--accent-uninorte); flex-shrink:0;">
                <i class="fas fa-stethoscope" style="font-size:1.2rem;"></i>
            </div>
            <div>
                <strong class="text-label" style="color:var(--text-main);">Diagnóstico</strong>
                <p class="text-body" style="margin:0; font-size:1.1rem;">DOFA y análisis de brechas TI.</p>
            </div>
        </div>
        <div class="flex-row">
            <div style="width:50px; height:50px; background:var(--bg-panel); border-radius:50%; display:grid; place-items:center; color:var(--accent-uninorte); flex-shrink:0;">
                <i class="fas fa-chart-line" style="font-size:1.2rem;"></i>
            </div>
            <div>
                <strong class="text-label" style="color:var(--text-main);">Madurez & Plan</strong>
                <p class="text-body" style="margin:0; font-size:1.1rem;">Adaptación del sistema por fases.</p>
            </div>
        </div>
      </div>
      
      <div class="table-container reveal">
          <h3 class="text-h3" style="margin-bottom: 20px; border-bottom: 2px solid var(--line-soft); padding-bottom: 10px; display: inline-block;">Medición de madurez</h3>
          
          <table class="wow-table">
            <thead>
              <tr>
                <th>Cód</th>
                <th>Dimensión</th>
                <th>Nivel</th>
              </tr>
            </thead>
            <tbody>
              <tr class="wow-table-row">
                <td><span class="code-badge">D1</span></td>
                <td class="dim-text">Enfoque ciudadano e información para la decisión</td>
                <td>
                  <div class="level-container">
                    <span class="level-num">3</span>
                    <div class="progress-track"><div class="progress-fill fill-3" style="--w: 60%"></div></div>
                  </div>
                </td>
              </tr>
              <tr class="wow-table-row">
                <td><span class="code-badge">D2</span></td>
                <td class="dim-text">Gobierno y dirección de TI</td>
                <td>
                  <div class="level-container">
                    <span class="level-num">3</span>
                    <div class="progress-track"><div class="progress-fill fill-3" style="--w: 60%"></div></div>
                  </div>
                </td>
              </tr>
              <tr class="wow-table-row">
                <td><span class="code-badge">D3</span></td>
                <td class="dim-text">Gestión de servicios y de proyectos/programas de TI</td>
                <td>
                  <div class="level-container">
                    <span class="level-num">3</span>
                    <div class="progress-track"><div class="progress-fill fill-3" style="--w: 60%"></div></div>
                  </div>
                </td>
              </tr>
              <tr class="wow-table-row">
                <td><span class="code-badge">D4</span></td>
                <td class="dim-text">Datos, analítica, calidad, riesgo y seguridad de TI</td>
                <td>
                  <div class="level-container">
                    <span class="level-num">2</span>
                    <div class="progress-track"><div class="progress-fill fill-2" style="--w: 40%"></div></div>
                  </div>
                </td>
              </tr>
              <tr class="wow-table-row">
                <td><span class="code-badge">D5</span></td>
                <td class="dim-text">Capacidades organizacionales, talento y sostenibilidad del sistema de TI</td>
                <td>
                  <div class="level-container">
                    <span class="level-num">3</span>
                    <div class="progress-track"><div class="progress-fill fill-3" style="--w: 60%"></div></div>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
      </div>
    </div>
  </section>

  <!-- 9. RESULTADOS (NUEVO DISEÑO INTERACTIVO) -->
  <section class="slide">
    <h2 class="text-h2">Resultados de la Validación</h2>
    
    <div class="results-grid">
        
        <!-- 1. MADUREZ -->
        <div class="result-card score-card">
            <h3 class="rc-title"><i class="fas fa-chart-pie"></i> Madurez Promedio</h3>
            <div class="big-score">2,8</div>
            <p style="font-size: 1.2rem; margin:0; opacity: 0.9;">56% Global</p>
            
            <div style="margin-top: 20px; text-align: left; width: 100%;">
                <div class="score-detail">
                    <div style="display:flex; justify-content:space-between; margin-bottom:5px; font-size:0.85rem;">
                        <span>D1, D2, D3 y D5</span>
                        <span style="font-weight:700;">Nivel 3 (60%)</span>
                    </div>
                    <div style="height:8px; background:rgba(255,255,255,0.2); border-radius:4px; overflow:hidden;">
                        <div style="width:60%; height:100%; background:#4caf50;"></div>
                    </div>
                </div>
                <div class="score-detail" style="background: rgba(227, 62, 51, 0.15); margin-top: 10px;">
                    <div style="display:flex; justify-content:space-between; margin-bottom:5px; font-size:0.85rem;">
                        <span>D4 (Más baja)</span>
                        <span style="font-weight:700; color:#ff8a80;">Nivel 2 (40%)</span>
                    </div>
                    <div style="height:8px; background:rgba(255,255,255,0.2); border-radius:4px; overflow:hidden;">
                        <div style="width:40%; height:100%; background:#E33E33;"></div>
                    </div>
                    <p style="font-size: 0.8rem; margin: 8px 0 0 0; line-height: 1.3; color: rgba(255,255,255,0.95);">
                        <i class="fas fa-exclamation-triangle"></i> Brecha crítica en datos, analítica, seguridad y riesgo.
                    </p>
                </div>
            </div>
        </div>

        <!-- 2. DIAGNÓSTICO -->
        <div class="result-card">
            <h3 class="rc-title"><i class="fas fa-stethoscope" style="color:var(--green-mid);"></i> Diagnóstico</h3>
            <p class="rc-body">
                Se identifican brechas significativas en <strong>gobernanza/alineación</strong>, modelo operativo, y capacidades digitales.
            </p>
            <div style="margin-top:auto; font-size:0.85rem; color:var(--text-muted); display:flex; gap:10px;">
                <span style="background:#eee; padding:4px 8px; border-radius:4px;">AS-IS</span>
                <i class="fas fa-arrow-right" style="color:var(--accent-uninorte);"></i>
                <span style="background:var(--green-mid); color:white; padding:4px 8px; border-radius:4px;">TO-BE</span>
            </div>
        </div>

        <!-- 3. HALLAZGO CENTRAL -->
        <div class="result-card" style="border-top: 4px solid var(--accent-uninorte);">
            <h3 class="rc-title"><i class="fas fa-lightbulb" style="color:var(--accent-uninorte);"></i> Hallazgo Central</h3>
            <p class="rc-body">
                Existe una <strong>base formal sólida</strong> (PETI 2024-27, Dirección TIC), pero persisten debilidades críticas en la <span class="highlight-text">operacionalización</span> del gobierno de TI y la integración real.
            </p>
        </div>

        <!-- 4. ADAPTACIÓN (IMPONENTE) -->
        <div class="result-card card-adaptation">
             <h3 class="rc-title"><i class="fas fa-sliders" style="color:var(--green-mid);"></i> Adaptación del Modelo</h3>
             
             <div class="adapt-content">
                 <div class="adapt-main">
                     <p class="rc-body" style="font-size:1.1rem; margin-bottom:15px;">
                         <i class="fas fa-check-circle" style="color:var(--green-mid);"></i> Aterrizaje en <strong>órganos de gobernanza</strong> reales.
                     </p>
                     <p class="rc-body" style="font-size:1.1rem;">
                         <i class="fas fa-check-circle" style="color:var(--green-mid);"></i> Definición clara de <strong>roles y derechos de decisión</strong>.
                     </p>
                 </div>
                 
                 <div class="adapt-grid">
                     <span class="process-badge"><i class="fas fa-concierge-bell"></i> Servicios</span>
                     <span class="process-badge"><i class="fas fa-briefcase"></i> Portafolio</span>
                     <span class="process-badge"><i class="fas fa-database"></i> Datos/Analítica</span>
                     <span class="process-badge"><i class="fas fa-shield-alt"></i> Seguridad</span>
                     <span class="process-badge"><i class="fas fa-users"></i> Cultura Digital</span>
                 </div>
             </div>
        </div>

        <!-- 5. IMPLEMENTACIÓN (CICLO) -->
        <div class="result-card bg-panel card-implementation">
            <h3 class="rc-title"><i class="fas fa-sync-alt" style="color:var(--green-mid);"></i> Implementación</h3>
            <div class="cycle-wrapper">
                <svg class="cycle-svg" viewBox="0 0 200 150">
                    <path class="arrow-path" d="M110,30 Q160,50 150,100" marker-end="url(#arrowhead)"/>
                    <path class="arrow-path" d="M140,120 Q100,140 60,120" marker-end="url(#arrowhead)"/>
                    <path class="arrow-path" d="M50,100 Q40,50 90,30" marker-end="url(#arrowhead)"/>
                    <defs>
                        <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                            <polygon points="0 0, 10 3.5, 0 7" fill="#6F9E96"/>
                        </marker>
                    </defs>
                </svg>
                <div class="cycle-node node-1">
                    <div class="c-icon"><i class="fas fa-landmark"></i></div>
                    <span class="c-text">Institucionalizar Gobernanza</span>
                </div>
                <div class="cycle-node node-2">
                    <div class="c-icon"><i class="fas fa-database"></i></div>
                    <span class="c-text">Fortalecer Datos</span>
                </div>
                <div class="cycle-node node-3">
                    <div class="c-icon"><i class="fas fa-people-group"></i></div>
                    <span class="c-text">Gestión del Cambio</span>
                </div>
            </div>
        </div>
    </div>
  </section>

  <!-- 10. CONCLUSIONES -->
  <section class="slide">
    <h2 class="text-h2" style="margin-bottom: 30px;">Conclusiones</h2>
    <div class="bento-grid">
        <div class="bento-card span-2 bg-deep">
            <i class="fas fa-puzzle-piece bento-icon"></i>
            <h3 class="bento-title">Viabilidad Sistémica</h3>
            <p class="bento-text">Es viable un sistema integrado de gobernanza y gestión de TI, articulado con gobierno corporativo y transformación digital, incorporando riesgos y desempeño.</p>
        </div>
        <div class="bento-card bg-accent">
            <i class="fas fa-building-columns bento-icon"></i>
            <h3 class="bento-title">Adaptabilidad</h3>
            <p class="bento-text">El sistema se adapta aprovechando instrumentos existentes (PETI, Dirección TIC) para cerrar brechas.</p>
        </div>

        <div class="bento-card bg-light">
            <i class="fas fa-route bento-icon" style="color:var(--green-mid)"></i>
            <h3 class="bento-title" style="color:var(--green-deep)">Modelo Replicable</h3>
            <p class="bento-text" style="color:var(--text-main)">La secuencia: <strong>Diagnóstico + Madurez + Diseño + Plan</strong> es una ruta efectiva para entidades públicas.</p>
        </div>
        <div class="bento-card bg-light">
            <i class="fas fa-chart-bar bento-icon" style="color:var(--green-mid)"></i>
            <h3 class="bento-title" style="color:var(--green-deep)">Priorización</h3>
            <p class="bento-text" style="color:var(--text-main)">El modelo de madurez estructura capacidades clave y ayuda a priorizar mejoras de alto impacto.</p>
        </div>
        
        <div class="bento-card span-full process-card">
            <h3 class="bento-title" style="color:var(--green-deep); margin-bottom: 20px;">Implementación Gradual <span style="font-weight:400; font-size:0.9em; opacity:0.7;">& Sostenibilidad</span></h3>
            
            <div class="timeline-clean">
                <div class="tl-step">
                    <div class="tl-circle">1</div>
                    <span class="tl-label">Formalizar</span>
                </div>
                <div class="tl-step">
                    <div class="tl-circle">2</div>
                    <span class="tl-label">Desplegar</span>
                </div>
                <div class="tl-step">
                    <div class="tl-circle">3</div>
                    <span class="tl-label">Consolidar</span>
                </div>
            </div>
            
            <p class="bento-text" style="margin-top: 15px; text-align: center; font-size: 0.9rem; color: var(--text-muted);">
                <i class="fas fa-info-circle"></i> Clave: Compromiso Directivo + Recursos + Gestión del Cambio
            </p>
        </div>
    </div>
  </section>

  <!-- 11. REFERENCIAS -->
  <section class="slide">
    <h2 class="text-h2">Referencias</h2>
    <div class="reveal" style="display:flex; flex-direction:column; align-items:start; gap:30px;">
        <p class="text-body" style="max-width: 800px;">
            Este trabajo se fundamenta en una revisión exhaustiva de estándares internacionales, normatividad colombiana y literatura académica sobre gobernanza de TI.
        </p>
        
        <button class="btn-biblio" onclick="openModal()">
            <i class="fas fa-book-open"></i> Ver Bibliografía Completa
        </button>
        
        <div class="grid-2" style="width:100%; margin-top:20px;">
             <div class="card-highlight">
                 <strong class="text-label">Marcos Principales</strong>
                 <ul class="list-custom" style="margin-top:10px;">
                     <li>COBIT 2019 (ISACA)</li>
                     <li>TOGAF 9.2 (The Open Group)</li>
                     <li>ITIL 4 (AXELOS)</li>
                 </ul>
             </div>
             <div class="card-highlight" style="border-left-color: var(--green-mid);">
                 <strong class="text-label">Normativa Colombia</strong>
                 <ul class="list-custom" style="margin-top:10px;">
                     <li>MinTIC (Marco de Arquitectura)</li>
                     <li>Decreto 1499 de 2017</li>
                     <li>Modelos de Madurez (Ciudades Inteligentes)</li>
                 </ul>
             </div>
        </div>
    </div>
  </section>

  <!-- 12. FIN -->
  <section class="slide">
      <div style="height: 100%; display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center;">
          <h1 class="reveal" style="font-size: 6rem; color: var(--green-deep);">FIN</h1>
          <div class="divider reveal" style="width: 100px; background: var(--accent-uninorte); height: 5px; margin: 30px auto;"></div>
          <p class="text-body reveal" style="font-family: var(--font-title); font-size: 2rem; font-style: italic;">Gracias por su atención</p>
      </div>
  </section>

  <!-- CONTROLES -->
  <div class="controls">
    <button class="btn-nav" id="prevBtn"><i class="fas fa-arrow-left"></i></button>
    <div id="slide-counter">1 / 12</div>
    <button class="btn-nav" id="nextBtn"><i class="fas fa-arrow-right"></i></button>
  </div>

  <!-- MODAL BIBLIOGRAFIA -->
  <div class="modal-overlay" id="biblioModal">
      <div class="modal-content">
          <div class="modal-header">
              <h3 class="modal-title">Bibliografía Completa</h3>
              <button class="close-modal" onclick="closeModal()">&times;</button>
          </div>
          <div class="modal-body">
              <ul class="biblio-list" id="biblio-list-container">
                  <!-- Se llenará dinámicamente -->
              </ul>
          </div>
      </div>
  </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', () => {
  const state = { current: 0, slides: document.querySelectorAll('.slide') };
  const ui = { 
    bar: document.getElementById('progressBar'), 
    counter: document.getElementById('slide-counter'),
    prevBtn: document.getElementById('prevBtn'),
    nextBtn: document.getElementById('nextBtn'),
    app: document.getElementById('app') 
  };
  const total = state.slides.length;

  const loadBibliography = async () => {
    try {
        const response = await fetch('bibliography.json');
        const data = await response.json();
        const container = document.getElementById('biblio-list-container');
        
        container.innerHTML = data.map(item => `<li>${item.ref}</li>`).join('');
    } catch (error) {
        console.warn("No se pudo cargar el JSON externo. Usando datos de respaldo.");
        document.getElementById('biblio-list-container').innerHTML = `
          <li style="color:red; list-style:none; padding:20px; text-align:center;">
            <i class="fas fa-exclamation-triangle" style="font-size:2rem; margin-bottom:10px;"></i><br>
            Para ver la bibliografía completa, asegúrate de abrir este archivo a través de un servidor local (localhost) o subir la carpeta a un hosting web, debido a las políticas de seguridad del navegador.
          </li>`;
    }
  };

  const updateSlide = () => {
    state.slides.forEach((s, i) => s.classList.toggle('active', i === state.current));
    ui.bar.style.width = `${((state.current + 1) / total) * 100}%`;
    ui.counter.textContent = `${state.current + 1} / ${total}`;
    ui.prevBtn.disabled = state.current === 0;
    ui.nextBtn.disabled = state.current === total - 1;
  };

  const nextSlide = () => { if(state.current < total - 1) { state.current++; updateSlide(); } };
  const prevSlide = () => { if(state.current > 0) { state.current--; updateSlide(); } };

  document.addEventListener('click', (e) => {
    const btn = e.target.closest('button');
    if (!btn) {
        const modal = document.getElementById('biblioModal');
        if(modal && e.target === modal) modal.classList.remove('open');
        return;
    }
    if (btn.id === 'nextBtn') nextSlide();
    if (btn.id === 'prevBtn') prevSlide();
  });

  document.addEventListener('keydown', (e) => {
    if(['ArrowRight', ' ', 'Enter'].includes(e.key)) nextSlide();
    if(['ArrowLeft', 'Backspace'].includes(e.key)) prevSlide();
    if(e.key === 'Escape') {
        const modal = document.getElementById('biblioModal');
        if(modal) modal.classList.remove('open');
    }
  });

  let touchX = 0;
  ui.app.addEventListener('touchstart', e => touchX = e.changedTouches[0].screenX, {passive: true});
  ui.app.addEventListener('touchend', e => {
      const diff = e.changedTouches[0].screenX - touchX;
      if (Math.abs(diff) > 50) 
          e.changedTouches[0].screenX < touchX ? nextSlide() : prevSlide();
  }, {passive: true});

  window.openModal = () => document.getElementById('biblioModal').classList.add('open');
  window.closeModal = () => document.getElementById('biblioModal').classList.remove('open');

  updateSlide();
  loadBibliography();
});
</script>

</body>
</html>
