<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8">
<title>Sustentación Maestría - Gobernanza TI</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="Presentación de Tesis de Maestría en Gobierno de TI - Uninorte">

<!-- =========================================
     RECURSOS EXTERNOS
     ========================================= -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Source+Sans+3:wght@400;500;600&family=Source+Serif+4:wght@400;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<style>
/* =========================================
   1. SISTEMA DE DISEÑO
   ========================================= */
:root {
  /* Paleta */
  --accent-uninorte: #C4122F;  
  --green-deep:      #1F3B37;  
  --green-mid:       #3E7C74;  
  --green-soft:      #6F9E96;  
  
  /* Semáforo Madurez */
  --col-level-1: #8B0000; /* Rojo Oscuro */
  --col-level-2: #E33E33; /* Rojo Claro */
  --col-level-3: #FFC107; /* Amarillo */
  --col-level-4: #2E7D32; /* Verde */

  /* Neutros */
  --bg-main:         #FFFFFF;
  --bg-panel:        #F8F9FA;
  --text-main:       #1a1a1a;
  --text-muted:      #555555;
  --line-soft:       rgba(0,0,0,0.08); 

  /* Tipografía */
  --font-title: "Source Serif 4", serif;
  --font-body:  "Source Sans 3", sans-serif;

  /* Espaciado */
  --radius:   20px; 
  --space-lg: 40px; 
  --space-md: 20px; 

  /* Animaciones */
  --trans-slide:  0.6s cubic-bezier(0.22, 1, 0.36, 1);
  --trans-ui:     0.2s cubic-bezier(0.4, 0, 0.2, 1);
}

body { margin: 0; font-family: var(--font-body); background-color: #e0e0e0; color: var(--text-main); overflow: hidden; font-size: 17px; }
*:focus-visible { outline: 3px solid var(--accent-uninorte); outline-offset: 4px; border-radius: 4px; }
#app { width: 100vw; height: 100vh; display: flex; justify-content: center; align-items: center; position: relative; background-color: #dcdcdc; }
.noise-bg { position: fixed; inset: 0; pointer-events: none; z-index: 0; opacity: 0.03; background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.7' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)'/%3E%3C/svg%3E"); }

/* SLIDES */
section.slide {
  display: none; position: absolute; width: 90%; height: 85%; max-width: 1600px;
  background: var(--bg-main); padding: var(--space-lg); box-sizing: border-box; opacity: 0;
  border-radius: var(--radius); box-shadow: 0 20px 50px -10px rgba(0,0,0,0.15); border-top: 6px solid var(--accent-uninorte);
  overflow-y: auto; scrollbar-width: thin; scrollbar-color: var(--green-mid) transparent;
  transform: translate3d(0, 20px, 0); transition: opacity var(--trans-slide), transform var(--trans-slide); z-index: 1;
}
section.slide.active { display: flex; flex-direction: column; justify-content: center; opacity: 1; z-index: 2; transform: translate3d(0, 0, 0); }
section.slide.active.overflowing { justify-content: flex-start; }

/* TIPOGRAFÍA */
h1, h2 { font-family: var(--font-title); font-weight: 700; color: var(--green-deep); margin-top: 0; }
.text-h1 { font-size: 3.5rem; line-height: 1.1; margin-bottom: var(--space-md); }
.text-h2 { font-size: 2.5rem; margin-bottom: var(--space-lg); position: relative; display: inline-block; }
.text-h2::after { content: ''; display: block; width: 60px; height: 4px; background: var(--green-mid); margin-top: 12px; border-radius: 2px; }
.text-h3 { font-family: var(--font-body); font-size: 1.35rem; font-weight: 600; color: var(--green-deep); margin-bottom: var(--space-sm); }
.text-body { font-size: 1.2rem; line-height: 1.6; color: var(--text-main); font-weight: 400; margin-bottom: var(--space-sm); }
.text-label { font-family: var(--font-body); font-size: 0.85rem; font-weight: 700; text-transform: uppercase; letter-spacing: 1.2px; color: var(--green-mid); }

/* UTILIDADES */
.grid-2 { display: grid; grid-template-columns: 1.1fr 0.9fr; gap: 40px; align-items: center; height: 100%; width: 100%; }
.grid-4 { display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; width: 100%; }
.flex-col { display: flex; flex-direction: column; width: 100%; }
.flex-row { display: flex; align-items: center; gap: 20px; }
.card-highlight { background: var(--bg-main); padding: 20px 25px; margin-bottom: 15px; border-left: 4px solid var(--accent-uninorte); box-shadow: 0 4px 12px rgba(0,0,0,0.06); border-radius: 0 8px 8px 0; }
.divider { width: 100%; height: 1px; background: var(--line-soft); margin: 20px 0; }

/* --- INTRODUCCIÓN (DISEÑO SATÉLITE) --- */
.intro-grid {
    display: grid;
    grid-template-columns: 1fr 300px 1fr;
    gap: 30px;
    align-items: center;
    height: 100%;
}
.intro-card {
    background: white; padding: 20px; border-radius: 12px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.05); border: 1px solid rgba(0,0,0,0.03);
    transition: transform 0.3s; cursor: pointer; /* Interactivo */
    display: flex; flex-direction: column; gap: 5px;
}
.intro-card:hover { transform: translateY(-5px) scale(1.02); box-shadow: 0 10px 25px rgba(0,0,0,0.1); border-color: var(--green-mid); }
.intro-icon { font-size: 1.5rem; color: var(--accent-uninorte); margin-bottom: 5px; }

/* --- ÁRBOL DE PROBLEMAS (Slide 3) --- */
.problem-tree {
    display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100%; gap: 30px;
}
.roots-container { display: flex; gap: 20px; justify-content: center; width: 100%; }
.root-card {
    background: #fdfdfd; border-top: 4px solid var(--green-mid);
    padding: 15px; border-radius: 8px; box-shadow: 0 4px 10px rgba(0,0,0,0.05);
    flex: 1; text-align: center; font-size: 0.95rem;
}
.trunk-connector {
    width: 4px; height: 40px; background: #ddd; position: relative;
}
.trunk-connector::after {
    content: ''; position: absolute; top: 0; left: -50px; right: -50px; height: 2px; background: #ddd; z-index: -1;
}
.trunk-connector::before {
    content: ''; position: absolute; bottom: 0; left: -4px;
    border-left: 6px solid transparent; border-right: 6px solid transparent;
    border-bottom: 8px solid var(--accent-uninorte);
}
.consequence-box {
    background: #FFF5F6; border: 2px solid rgba(196, 18, 47, 0.1);
    padding: 25px; border-radius: 16px; text-align: center;
    box-shadow: 0 10px 30px rgba(196, 18, 47, 0.05); max-width: 600px;
    position: relative;
}
.consequence-box::before {
    content: 'Consecuencia Principal'; position: absolute; top: -12px; left: 50%; transform: translateX(-50%);
    background: var(--accent-uninorte); color: white; padding: 2px 12px; border-radius: 12px; font-size: 0.75rem; font-weight: 700;
}

/* --- APORTE WOW (Slide 4) --- */
.wow-card {
    background: linear-gradient(135deg, var(--green-deep), #2F4F4F);
    color: white; padding: 30px; border-radius: 20px;
    box-shadow: 0 15px 40px rgba(31, 59, 55, 0.25);
    position: relative; overflow: hidden;
    transition: transform 0.3s;
}
.wow-card:hover { transform: translateY(-5px); }
.wow-card::after {
    content: ''; position: absolute; top: -50px; right: -50px; width: 150px; height: 150px;
    background: rgba(255,255,255,0.1); border-radius: 50%;
}
.wow-list li { margin-bottom: 10px; padding-left: 20px; position: relative; list-style: none; font-size: 1.15rem; }
.wow-list li::before { content: '✓'; position: absolute; left: 0; color: var(--accent-uninorte); font-weight: bold; }

/* --- OBJETIVO GENERAL (Slide 5) --- */
.objective-main {
    background: var(--green-deep); color: white; padding: 40px; border-radius: 16px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.15); text-align: center; margin-bottom: 30px;
    border: 1px solid rgba(255,255,255,0.1); position: relative;
}
.objective-main h3 { color: rgba(255,255,255,0.7); font-size: 0.9rem; text-transform: uppercase; letter-spacing: 2px; margin-bottom: 15px; }
.objective-main p { font-size: 1.6rem; font-family: var(--font-title); line-height: 1.4; }

/* --- TABLA & SEMÁFORO (Slide 8) --- */
.wow-table { width: 100%; border-collapse: separate; border-spacing: 0 12px; }
.wow-table th { text-align: left; font-size: 0.8rem; font-weight: 700; text-transform: uppercase; color: var(--green-mid); padding: 0 20px 5px; }
.wow-table-row { background: white; box-shadow: 0 2px 8px rgba(0,0,0,0.04); transition: transform 0.2s; border-radius: 12px; }
.wow-table-row:hover { transform: translateX(5px); box-shadow: 0 6px 12px rgba(0,0,0,0.08); border-left: 4px solid var(--accent-uninorte); }
.wow-table td { padding: 18px 20px; vertical-align: middle; border: 1px solid transparent; }
.wow-table tr td:first-child { border-top-left-radius: 12px; border-bottom-left-radius: 12px; font-weight: 700; color: var(--green-deep); width: 50px; }
.wow-table tr td:last-child { border-top-right-radius: 12px; border-bottom-right-radius: 12px; width: 35%; }

/* Semáforo Específico */
.level-container { display: flex; align-items: center; gap: 15px; width: 100%; }
.level-num { font-weight: 700; color: var(--text-main); font-size: 1.1rem; min-width: 25px; text-align: center; }
.progress-track { flex-grow: 1; height: 12px; background: #eee; border-radius: 6px; overflow: hidden; }
.progress-fill { height: 100%; width: 0; transition: width 1.5s cubic-bezier(0.4, 0, 0.2, 1); border-radius: 6px; }

/* Colores Semáforo Ajustados */
.fill-1 { background: var(--col-level-1); box-shadow: 0 0 8px rgba(139, 0, 0, 0.4); } 
.fill-2 { background: var(--col-level-2); box-shadow: 0 0 8px rgba(227, 62, 51, 0.4); } 
.fill-3 { background: var(--col-level-3); box-shadow: 0 0 8px rgba(255, 193, 7, 0.4); } 
.fill-4 { background: var(--col-level-4); box-shadow: 0 0 8px rgba(46, 125, 50, 0.4); } 

/* --- IMÁGENES Y OVERLAYS --- */
.img-wrapper {
    width: 100%; height: 100%; min-height: 350px; 
    border-radius: var(--radius); overflow: hidden; position: relative;
    background: var(--bg-panel); display: flex; align-items: center; justify-content: center;
    box-shadow: inset 0 0 0 1px rgba(0,0,0,0.05);
}
.img-cover { width: 100%; height: 100%; object-fit: contain; position: absolute; z-index: 0; transition: transform 0.5s ease; } 
.img-fallback { position: absolute; inset: 0; z-index: 0; display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center; background: var(--bg-panel); color: #ccc; }
.scrim { position: absolute; inset: 0; background: linear-gradient(135deg, var(--green-deep) 0%, rgba(31, 59, 55, 0.95) 100%); z-index: 1; transition: opacity 0.4s ease; }
.content-overlay { position: relative; z-index: 2; padding: 2rem; text-align: center; color: white; display: flex; flex-direction: column; justify-content: center; height: 100%; transition: opacity 0.4s ease, transform 0.4s ease; }
.interactive-overlay { cursor: zoom-in; }
.interactive-overlay:hover .scrim { opacity: 0; }
.interactive-overlay:hover .content-overlay { opacity: 0; transform: scale(1.05); }
.interactive-overlay:hover .img-cover { transform: scale(1.02); }

/* --- CICLO IMPLEMENTACIÓN (Slide 9 - Ajustado) --- */
.cycle-wrapper { position: relative; width: 100%; height: 100%; min-height: 180px; display: flex; justify-content: center; align-items: center; margin-top: 15px; }
.cycle-svg { position: absolute; width: 90%; height: 90%; top: 5%; left: 5%; pointer-events: none; }
.arrow-path { fill: none; stroke: var(--green-soft); stroke-width: 2; stroke-dasharray: 6; animation: dash 30s linear infinite; opacity: 0.6; }
@keyframes dash { to { stroke-dashoffset: -100; } }
.cycle-node { position: absolute; display: flex; flex-direction: column; align-items: center; text-align: center; width: 130px; z-index: 1; transition: transform 0.3s; }
.cycle-node:hover { transform: scale(1.1); z-index: 10; }
.c-icon { width: 55px; height: 55px; background: white; border: 3px solid var(--green-mid); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.3rem; color: var(--green-deep); margin-bottom: 8px; box-shadow: 0 4px 10px rgba(0,0,0,0.08); transition: all 0.3s; }
.cycle-node:hover .c-icon { background: var(--green-mid); color: white; }
.c-text { font-size: 0.85rem; font-weight: 700; line-height: 1.2; color: var(--text-main); }
/* Triangle Positioning */
.node-1 { top: 0px; } 
.node-2 { bottom: 0px; right: 0px; } 
.node-3 { bottom: 0px; left: 0px; }

/* --- GRID RESULTADOS --- */
.results-grid { display: grid; grid-template-columns: repeat(3, 1fr); grid-template-rows: auto auto 1fr; gap: 20px; height: 100%; }
.result-card { background: white; border-radius: 16px; padding: 25px; box-shadow: 0 4px 15px rgba(0,0,0,0.05); border: 1px solid rgba(0,0,0,0.02); display: flex; flex-direction: column; overflow: hidden; position: relative; transition: transform 0.3s; }
.result-card:hover { transform: translateY(-5px); z-index: 5; box-shadow: 0 15px 30px rgba(0,0,0,0.1); }
.score-card { grid-column: span 1; grid-row: span 2; background: linear-gradient(145deg, var(--green-deep), #1a3330); color: white; align-items: center; text-align: center; justify-content: center; }
.big-score { font-size: 5rem; font-weight: 700; margin: 15px 0; line-height: 1; letter-spacing: -2px; }
.rc-title { font-family: var(--font-title); font-size: 1.25rem; font-weight: 600; color: var(--green-deep); margin-bottom: 12px; display: flex; align-items: center; gap: 10px; }
.score-card .rc-title { color: rgba(255,255,255,0.95); }
.score-detail { background: rgba(255,255,255,0.1); padding: 12px 15px; border-radius: 10px; margin-top: 10px; width: 100%; backdrop-filter: blur(5px); }
.card-adaptation { grid-column: span 2; background: #fdfdfd; border-left: 5px solid var(--accent-uninorte); }
.adapt-content { display: flex; justify-content: space-between; align-items: center; gap: 30px; height: 100%; }
.adapt-main { flex: 0 0 40%; }
.adapt-grid { flex: 1; display: flex; flex-wrap: wrap; gap: 10px; }
.process-badge { background: var(--bg-panel); border: 1px solid rgba(0,0,0,0.05); color: var(--green-deep); padding: 8px 14px; border-radius: 20px; font-size: 0.9rem; font-weight: 600; display: flex; align-items: center; gap: 8px; transition: all 0.2s; }
.process-badge:hover { background: var(--green-mid); color: white; transform: translateY(-2px); }
.card-implementation { grid-column: span 3; background: #fff; }

/* --- BENTO GRID CONCLUSIONES --- */
.bento-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; width: 100%; }
.bento-card { background: white; border-radius: 16px; padding: 25px; box-shadow: 0 4px 15px rgba(0,0,0,0.05); display: flex; flex-direction: column; justify-content: space-between; min-height: 180px; transition: transform 0.3s; border: 1px solid rgba(0,0,0,0.02); }
.bento-card:hover { transform: translateY(-5px); box-shadow: 0 10px 25px rgba(0,0,0,0.1); }
.span-full { grid-column: span 2; }
.bg-deep { background: var(--green-deep); color: white; }
.bg-deep .bento-text { color: rgba(255,255,255,0.9); }
.bg-accent { background: var(--accent-uninorte); color: white; }
.bg-accent .bento-text { color: rgba(255,255,255,0.9); }
.bg-light { background: white; border-top: 4px solid var(--green-mid); }
.bento-icon { font-size: 2rem; margin-bottom: 15px; opacity: 0.9; }
.bento-title { font-family: var(--font-title); font-size: 1.25rem; margin-bottom: 10px; font-weight: 600; line-height: 1.2; }
.bento-text { font-size: 0.95rem; line-height: 1.5; }

/* Timeline Horizontal Limpia (Slide 10) */
.timeline-clean {
    display: flex; align-items: center; justify-content: space-between; position: relative; margin-top: 20px; width: 100%; max-width: 600px;
}
.timeline-clean::before {
    content: ''; position: absolute; top: 20px; left: 40px; right: 40px; height: 3px;
    background: #e0e0e0; z-index: 0;
}
.tl-step {
    position: relative; z-index: 1; display: flex; flex-direction: column; align-items: center; gap: 8px; text-align: center;
}
.tl-circle {
    width: 40px; height: 40px; background: white; border: 3px solid var(--green-mid);
    border-radius: 50%; color: var(--green-mid); font-weight: 700;
    display: flex; align-items: center; justify-content: center;
    transition: all 0.3s;
}
.tl-step:hover .tl-circle { background: var(--green-mid); color: white; transform: scale(1.2); }
.tl-label { font-size: 0.85rem; font-weight: 700; color: var(--green-deep); }

/* --- ANIMACIONES --- */
.reveal { opacity: 0; transform: translateY(15px); transition: all 0.7s ease; }
.slide.active .reveal:nth-child(1) { transition-delay: 0.1s; opacity: 1; transform: translateY(0); }
.slide.active .reveal:nth-child(2) { transition-delay: 0.2s; opacity: 1; transform: translateY(0); }
.slide.active .reveal:nth-child(3) { transition-delay: 0.3s; opacity: 1; transform: translateY(0); }
.slide.active .reveal:nth-child(4) { transition-delay: 0.4s; opacity: 1; transform: translateY(0); }

/* Animación Staggered de elementos internos */
.slide.active .wow-table-row { opacity: 0; animation: slideInLeft 0.8s ease forwards; }
.slide.active .result-card, .slide.active .bento-card { opacity: 0; animation: fadeUp 0.6s ease forwards; }

/* Delays calculados */
.slide.active .result-card:nth-child(1) { animation-delay: 0.1s; }
.slide.active .result-card:nth-child(2) { animation-delay: 0.2s; }
.slide.active .result-card:nth-child(3) { animation-delay: 0.3s; }
.slide.active .result-card:nth-child(4) { animation-delay: 0.4s; }
.slide.active .result-card:nth-child(5) { animation-delay: 0.5s; }

.slide.active .wow-table-row:nth-child(1) { animation-delay: 0.2s; }
.slide.active .wow-table-row:nth-child(2) { animation-delay: 0.3s; }
.slide.active .wow-table-row:nth-child(3) { animation-delay: 0.4s; }
.slide.active .wow-table-row:nth-child(4) { animation-delay: 0.5s; }
.slide.active .wow-table-row:nth-child(5) { animation-delay: 0.6s; }

.slide.active .progress-fill { animation: growBar 1s cubic-bezier(0.22, 1, 0.36, 1) forwards; animation-delay: 0.8s; }

@keyframes slideInLeft { from { opacity: 0; transform: translateX(-30px); } to { opacity: 1; transform: translateX(0); } }
@keyframes growBar { from { width: 0; } to { width: var(--w); } }
@keyframes fadeUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

/* --- CONTROLES DE NAVEGACIÓN --- */
.controls { 
    position: absolute; bottom: 1.5rem; right: 2rem; display: flex; gap: 10px; padding: 6px;
    background: rgba(255, 255, 255, 0.9); backdrop-filter: blur(10px); 
    border-radius: 50px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); z-index: 50; border: 1px solid rgba(255,255,255,0.05);
}
.btn-nav {
  width: 48px; height: 48px; border: none; background: white; color: var(--green-deep);
  border-radius: 50%; font-size: 1.1rem; cursor: pointer; transition: 0.2s;
  display: flex; align-items: center; justify-content: center; box-shadow: 0 2px 5px rgba(0,0,0,0.05);
}
.btn-nav:hover:not(:disabled) { background: var(--green-deep); color: white; transform: translateY(-2px); }
.btn-nav:disabled { opacity: 0.4; cursor: not-allowed; }
.progress-bar { position: absolute; top: 0; left: 0; height: 6px; background: var(--green-mid); width: 0; transition: width 0.5s; z-index: 100; }

/* Modal Bibliografía */
.modal-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.6); backdrop-filter: blur(5px); z-index: 2000; display: flex; justify-content: center; align-items: center; opacity: 0; pointer-events: none; transition: opacity 0.3s; }
.modal-overlay.open { opacity: 1; pointer-events: auto; }
.modal-content { background: white; width: 90%; max-width: 900px; height: 80%; border-radius: 20px; display: flex; flex-direction: column; padding: 30px; transform: translateY(20px); transition: transform 0.3s; }
.modal-overlay.open .modal-content { transform: translateY(0); }
.biblio-list { overflow-y: auto; padding-left: 20px; }
.biblio-list li { margin-bottom: 12px; padding-left: 1.5em; text-indent: -1.5em; font-size: 0.95rem; line-height: 1.5; }
.btn-biblio { background: var(--green-deep); color: white; border: none; padding: 10px 25px; border-radius: 30px; cursor: pointer; display: inline-flex; align-items: center; gap: 10px; margin-top: 20px; font-weight: 600; box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
.btn-biblio:hover { transform: translateY(-2px); box-shadow: 0 8px 16px rgba(0,0,0,0.15); background: var(--green-mid); }

/* Responsive */
@media (max-width: 1000px) {
  section.slide { padding: 30px 20px; }
  .grid-2, .grid-4, .bento-grid, .results-grid { grid-template-columns: 1fr; gap: 25px; display: flex; flex-direction: column; }
  .text-h1 { font-size: 2.2rem; }
  .text-h2 { font-size: 1.8rem; }
  .img-wrapper { min-height: 200px; }
  .score-card, .card-adaptation, .card-implementation { grid-column: span 1; grid-row: span 1; }
  .cycle-wrapper { min-height: 250px; }
  .wow-table th { display: none; }
  .wow-table-row { display: flex; flex-direction: column; padding: 15px; margin-bottom: 10px; border-radius: 12px; }
  .wow-table td { border: none; padding: 5px 0; }
  .span-full { grid-column: span 1; }
  .controls { right: 50%; transform: translateX(50%); bottom: 15px; width: 90%; justify-content: space-between; }
}
</style>
</head>

<body>
<div class="noise-bg"></div>
<div class="progress-bar" id="progressBar" aria-label="Progreso de la presentación"></div>

<div id="app">
  
  <!-- 1. PORTADA -->
  <section class="slide active" role="group" aria-label="Portada">
    <div class="reveal">
        <img src="assets/images/norte.png" alt="Logo Universidad del Norte" style="height: 100px; display:block; margin-bottom: var(--space-md);" onerror="this.style.display='none'; document.getElementById('logo-fallback').style.display='block'">
        <h3 id="logo-fallback" class="text-label" style="display:none; color:var(--text-main); font-size:1.2rem;">UNIVERSIDAD DEL NORTE</h3>
    </div>
    <div class="mt-lg reveal">
        <h1 class="text-h1">Sistema para la gobernanza y gestión integral de TI</h1>
        <h3 class="text-h3" style="font-weight: 400; color:var(--green-mid);">En entes territoriales (Caso: Alcaldía de Santa Marta)</h3>
    </div>
    <div class="divider reveal"></div>
    <div class="grid-2 reveal" style="align-items: flex-end;">
        <div>
            <div style="margin-bottom: 24px;">
                <p class="text-label mb-2">Candidatos</p>
                <p style="font-family: var(--font-title); font-size:1.4rem; font-weight:600; margin:0 0 4px 0;">Catalina Molina Valencia</p>
                <p style="font-family: var(--font-title); font-size:1.4rem; font-weight:600; margin:0;">Jaime Emiro Críales</p>
            </div>
            <div>
                <p class="text-label mb-2">Director</p>
                <p style="font-family: var(--font-title); font-size:1.4rem; font-weight:600; margin:0;">Wilson Nieto</p>
            </div>
        </div>
        <div style="text-align: right;">
            <p class="text-label mb-2">Trabajo de Grado</p>
            <p style="font-weight: 600; color:var(--green-deep); margin-bottom:8px;">Maestría en Gobierno de TI</p>
            <p class="color-muted" style="font-size: 0.9rem;">BARRANQUILLA • 2025</p>
        </div>
    </div>
  </section>

  <!-- 2. INTRODUCCIÓN (Diseño Satélite) -->
  <section class="slide" role="group" aria-label="Introducción">
    <h2 class="text-h2">Introducción</h2>
    <div class="intro-grid reveal">
        <!-- Izquierda -->
        <div class="flex-col" style="gap:20px;">
            <div class="intro-card">
                <i class="fas fa-server intro-icon"></i>
                <strong style="color:var(--text-main);">Retos</strong>
                <p style="font-size:0.9rem; margin:0;">Operación TI fragmentada y baja interoperabilidad.</p>
            </div>
            <div class="intro-card">
                <i class="fas fa-triangle-exclamation intro-icon"></i>
                <strong style="color:var(--text-main);">Impacto</strong>
                <p style="font-size:0.9rem; margin:0;">Trámites manuales y desconexión ciudadana.</p>
            </div>
        </div>

        <!-- Centro: Foco Ciudadano -->
        <div class="img-wrapper" style="border-radius:50%; width:300px; height:300px; min-height:auto; border: 4px solid var(--accent-uninorte); box-shadow: 0 0 30px rgba(196,18,47,0.1);">
            <div class="img-fallback" style="background:white;">
                <i class="fas fa-users-gear" style="font-size:5rem; color:var(--green-deep);"></i>
                <p class="text-label mt-lg" style="margin-top:15px; color:var(--accent-uninorte);">FOCO CIUDADANO</p>
            </div>
            <img src="assets/images/intro.jpg" class="img-cover" style="opacity:0.9;" alt="Ciudadanos" onerror="this.style.display='none'">
        </div>

        <!-- Derecha -->
        <div class="flex-col" style="gap:20px;">
            <div class="intro-card">
                <i class="fas fa-key intro-icon"></i>
                <strong style="color:var(--text-main);">Necesidad</strong>
                <p style="font-size:0.9rem; margin:0;">Gobierno y gestión como habilitadores reales.</p>
            </div>
            <div class="intro-card" style="border-left: 4px solid var(--green-mid);">
                <i class="fas fa-bullseye intro-icon"></i>
                <strong style="color:var(--text-main);">Propósito</strong>
                <p style="font-size:0.9rem; margin:0;">Sistema integrador centrado en valor.</p>
            </div>
        </div>
    </div>
  </section>

  <!-- 3. PROBLEMA (Árbol de Problemas) -->
  <section class="slide" role="group" aria-label="Problema">
    <h2 class="text-h2">Problema</h2>
    <div class="problem-tree reveal" style="display:flex; flex-direction:column; align-items:center; justify-content:center; height:100%; gap:30px;">
        <!-- Raíces (Causas) -->
        <div class="roots-container" style="display:flex; gap:20px; justify-content:center; width:100%;">
            <div class="root-card" style="background:#fdfdfd; border-top:4px solid var(--green-mid); padding:15px; border-radius:8px; box-shadow:0 4px 10px rgba(0,0,0,0.05); flex:1; text-align:center;">
                <i class="fas fa-project-diagram" style="color:var(--text-muted); margin-bottom:5px;"></i>
                <br><strong>Aislamiento</strong><br>Sistemas no estandarizados
            </div>
            <div class="root-card" style="background:#fdfdfd; border-top:4px solid var(--green-mid); padding:15px; border-radius:8px; box-shadow:0 4px 10px rgba(0,0,0,0.05); flex:1; text-align:center;">
                <i class="fas fa-eye-slash" style="color:var(--text-muted); margin-bottom:5px;"></i>
                <br><strong>Opacidad</strong><br>Decisiones sin datos
            </div>
            <div class="root-card" style="background:#fdfdfd; border-top:4px solid var(--green-mid); padding:15px; border-radius:8px; box-shadow:0 4px 10px rgba(0,0,0,0.05); flex:1; text-align:center;">
                <i class="fas fa-scale-unbalanced" style="color:var(--text-muted); margin-bottom:5px;"></i>
                <br><strong>Debilidad</strong><br>Falta dirección estratégica
            </div>
        </div>
        
        <!-- Tronco Conector -->
        <div class="trunk-connector" style="width:4px; height:30px; background:#ddd; position:relative;"></div>
        
        <!-- Copa (Consecuencias) -->
        <div class="consequence-box" style="background:#FFF5F6; border:2px solid rgba(196,18,47,0.1); padding:25px; border-radius:16px; text-align:center; box-shadow:0 10px 30px rgba(196,18,47,0.05); max-width:600px; position:relative;">
             <div style="position:absolute; top:-12px; left:50%; transform:translateX(-50%); background:var(--accent-uninorte); color:white; padding:2px 10px; border-radius:10px; font-size:0.75rem; font-weight:700;">Consecuencias</div>
             <i class="fas fa-triangle-exclamation icon-lg" style="font-size:2rem; color:var(--accent-uninorte); margin-bottom:10px;"></i>
             <p class="text-body" style="margin:0; font-weight:600;">
                 Inversiones reactivas, riesgos elevados y baja alineación estratégica.
             </p>
        </div>
    </div>
  </section>

  <!-- 4. JUSTIFICACIÓN (Aporte WOW) -->
  <section class="slide" role="group" aria-label="Justificación">
    <h2 class="text-h2">Justificación</h2>
    <div class="grid-2">
      <div class="reveal">
         <p class="text-body">Existe un <strong>déficit histórico</strong> de transformación digital por restricciones de capacidad.</p>
         <p class="text-body">Falta un <strong>marco sistemático</strong> aplicable a la realidad de los entes territoriales.</p>
         <p class="text-body"><strong>Relevancia:</strong> Mejora servicios al ciudadano, transparencia, control y confianza.</p>
      </div>
      
      <!-- Aporte WOW -->
      <div class="reveal wow-card" style="background: linear-gradient(135deg, var(--green-deep), #2F4F4F); color:white; padding:30px; border-radius:20px; box-shadow:0 15px 40px rgba(31,59,55,0.25); position:relative; overflow:hidden;">
         <h3 class="text-h3" style="color:white; border-bottom: 1px solid rgba(255,255,255,0.2); padding-bottom:10px;">El Aporte Diferencial</h3>
         <p style="color:rgba(255,255,255,0.8); font-size:0.9rem; text-transform:uppercase; letter-spacing:1px; margin-bottom:15px;">Integración Operable:</p>
         <ul class="wow-list" style="list-style:none; padding:0;">
             <li style="margin-bottom:10px; padding-left:25px; position:relative; font-size:1.15rem;"><i class="fas fa-check" style="position:absolute; left:0; color:var(--accent-uninorte);"></i> Arquitectura Empresarial</li>
             <li style="margin-bottom:10px; padding-left:25px; position:relative; font-size:1.15rem;"><i class="fas fa-check" style="position:absolute; left:0; color:var(--accent-uninorte);"></i> Gobierno & Gestión TI</li>
             <li style="margin-bottom:10px; padding-left:25px; position:relative; font-size:1.15rem;"><i class="fas fa-check" style="position:absolute; left:0; color:var(--accent-uninorte);"></i> Regulación Vigente</li>
         </ul>
      </div>
    </div>
  </section>

  <!-- 5. OBJETIVOS (General Oscuro) -->
  <section class="slide" role="group" aria-label="Objetivos">
    <h2 class="text-h2">Objetivos</h2>
    <div class="flex-col" style="height:100%;">
      
      <!-- Objetivo General Oscuro -->
      <div class="reveal objective-main" style="background:var(--green-deep); color:white; padding:40px; border-radius:16px; box-shadow:0 10px 30px rgba(0,0,0,0.15); text-align:center; margin-bottom:30px; border:1px solid rgba(255,255,255,0.1);">
        <h3 style="color:rgba(255,255,255,0.7); font-size:0.9rem; text-transform:uppercase; letter-spacing:2px; margin-bottom:15px;">Objetivo General</h3>
        <p style="font-size:1.5rem; font-family:var(--font-title); line-height:1.4;">
            Diseñar un sistema para la gobernanza y gestión integral de las tecnologías de la Información para los entes territoriales que sirva como Impulsor para la transformación digital, el desarrollo de la arquitectura empresarial y alineada con los estándares internacionales y la regulación en Colombia.
        </p>
      </div>
      
      <div class="grid-4 reveal" style="align-items: start;">
          <div class="card-highlight" style="border-left-color: var(--green-mid); padding: 15px;">
            <strong class="text-label">Específico 1</strong>
            <p class="text-body" style="font-size:1rem; margin:0;">Identificar los componentes conceptuales claves de gobernanza y gestión integral de TI.</p>
          </div>
          <div class="card-highlight" style="border-left-color: var(--green-mid); padding: 15px;">
            <strong class="text-label">Específico 2</strong>
            <p class="text-body" style="font-size:1rem; margin:0;">Estructurar el sistema gobernanza y gestión integral de las tecnologías de la Información.</p>
          </div>
          <div class="card-highlight" style="border-left-color: var(--green-mid); padding: 15px;">
            <strong class="text-label">Específico 3</strong>
            <p class="text-body" style="font-size:1rem; margin:0;">Validar el sistema de gobernanza y gestión integral a través de un modelo de madurez.</p>
          </div>
          <div class="card-highlight" style="border-left-color: var(--green-mid); padding: 15px;">
            <strong class="text-label">Específico 4</strong>
            <p class="text-body" style="font-size:1rem; margin:0;">Desarrollar el caso de estudio gobernanza y gestión integral en entes territoriales.</p>
          </div>
      </div>
    </div>
  </section>

  <!-- 6. MARCO TEÓRICO (Fallback Icono) -->
  <section class="slide" role="group" aria-label="Marco Teórico">
    <h2 class="text-h2">Marco Teórico</h2>
    <div class="grid-2" style="align-items: start;">
      <div class="reveal table-container">
          <table class="wow-table" style="font-size: 0.8rem;">
            <thead><tr><th style="width: 35%;">Autor / Entidad</th><th>Aporte clave</th></tr></thead>
            <tbody>
              <tr class="wow-table-row"><td style="font-weight:700; color:var(--green-deep);">Rogers (2023)</td><td>DX = cambio estratégico continuo.</td></tr>
              <tr class="wow-table-row"><td style="font-weight:700; color:var(--green-deep);">Selig (2008)</td><td>Gobierno TI como viaje de madurez.</td></tr>
              <tr class="wow-table-row"><td style="font-weight:700; color:var(--green-deep);">Weill & Ross</td><td>Derechos de decisión + rendición de cuentas.</td></tr>
              <tr class="wow-table-row"><td style="font-weight:700; color:var(--green-deep);">ISO/IEC 38500</td><td>Evaluar – Dirigir – Monitorear (EDM).</td></tr>
              <tr class="wow-table-row"><td style="font-weight:700; color:var(--green-deep);">COBIT 2019</td><td>EDM (gobierno) vs Gestión.</td></tr>
              <tr class="wow-table-row"><td style="font-weight:700; color:var(--green-deep);">MinTIC</td><td>Marcos públicos (IT4+, MGGTI).</td></tr>
            </tbody>
          </table>
      </div>
      
      <!-- Fallback con Icono -->
      <div class="reveal img-wrapper" style="background: white; border: 1px solid rgba(0,0,0,0.05); min-height: 500px;">
          <div class="img-fallback">
              <i class="fas fa-sitemap" style="font-size: 5rem; color: #ddd; margin-bottom: 20px;" aria-hidden="true"></i>
              <p style="color: #999; font-weight:600;">*</p>
          </div>
          <img src="assets/images/marco.png" class="img-cover" style="object-fit: contain; padding: 10px;" alt="Diagrama Marco Teórico" loading="lazy" onerror="this.style.display='none'">
      </div>
    </div>
  </section>

  <!-- 7. MODELO PROPUESTO -->
  <section class="slide" role="group" aria-label="Modelo Propuesto">
    <h2 class="text-h2">Modelo Propuesto</h2>
    <div class="grid-2" style="grid-template-columns: 0.7fr 1.3fr;">
      <div class="reveal">
        <ul class="list-custom">
            <li><strong>Enfoque Sistémico:</strong> Articulación entre Gobierno Corporativo y TI.</li>
            <li><strong>Eje Central:</strong> El ciudadano.</li>
            <li><strong>Componentes:</strong> Direccionamiento, Arquitectura y Procesos.</li>
            <li><strong>Control:</strong> Medición y madurez.</li>
        </ul>
      </div>
      
      <div class="reveal img-wrapper interactive-overlay" style="cursor: zoom-in; background: #333;" tabindex="0">
          <div class="scrim"></div>
          <div class="content-overlay">
              <h3 class="text-h3" style="color:white; border-bottom:3px solid var(--accent-uninorte); padding-bottom:1rem;">La Clave</h3>
              <p style="font-family:var(--font-title); font-size:1.8rem; font-style:italic; color: #fff;">"Traducir la estrategia institucional en ejecución técnica medible."</p>
              <div style="margin-top:2rem;">
                  <button class="btn-biblio" style="background:var(--accent-uninorte); animation: pulse 2s infinite;"><i class="fas fa-eye"></i> Ver Diagrama</button>
              </div>
          </div>
          <img src="assets/images/modelo.jpg" class="img-cover" style="object-fit: contain;" alt="Diagrama Modelo" loading="lazy" onerror="this.style.display='none'">
      </div>
    </div>
  </section>

  <!-- 8. CASO DE ESTUDIO (Semáforo Ajustado) -->
  <section class="slide" role="group" aria-label="Caso de Estudio">
    <h2 class="text-h2">Caso: Alcaldía de Santa Marta</h2>
    <div class="grid-2" style="grid-template-columns: 0.8fr 1.2fr;">
      <div class="reveal flex-col">
          <div class="card-highlight"><strong class="text-label">Contexto</strong><p class="text-body" style="margin:0;">Caracterización institucional y mapa de procesos.</p></div>
          <div class="card-highlight" style="border-left-color: var(--green-mid);"><strong class="text-label">Diagnóstico</strong><p class="text-body" style="margin:0;">Diagnóstico de capacidades TI / transformación digital.</p></div>
          <div class="card-highlight" style="border-left-color: var(--green-mid);"><strong class="text-label">Análisis</strong><p class="text-body" style="margin:0;">DOFA y análisis de brechas.</p></div>
          <div class="card-highlight" style="border-left-color: var(--green-mid);"><strong class="text-label">Validación</strong><p class="text-body" style="margin:0;">Aplicación del modelo de madurez.</p></div>
      </div>
      
      <!-- Tabla Semáforo WOW -->
      <div class="table-container reveal">
          <h3 class="text-h3" style="margin-bottom: 20px;">Medición de madurez</h3>
          <table class="wow-table">
            <tbody>
              <!-- 3 = Amarillo -->
              <tr class="wow-table-row">
                <td><span class="code-badge">D1</span></td><td class="dim-text">Enfoque ciudadano</td>
                <td><div class="level-container"><span class="level-num">3</span><div class="progress-track"><div class="progress-fill fill-3" style="--w: 60%"></div></div></div></td>
              </tr>
              <!-- 3 = Amarillo -->
              <tr class="wow-table-row">
                <td><span class="code-badge">D2</span></td><td class="dim-text">Gobierno y dirección</td>
                <td><div class="level-container"><span class="level-num">3</span><div class="progress-track"><div class="progress-fill fill-3" style="--w: 60%"></div></div></div></td>
              </tr>
              <!-- 3 = Amarillo -->
              <tr class="wow-table-row">
                <td><span class="code-badge">D3</span></td><td class="dim-text">Gestión de servicios</td>
                <td><div class="level-container"><span class="level-num">3</span><div class="progress-track"><div class="progress-fill fill-3" style="--w: 60%"></div></div></div></td>
              </tr>
              <!-- 2 = Rojo Claro -->
              <tr class="wow-table-row">
                <td><span class="code-badge">D4</span></td><td class="dim-text">Datos y seguridad</td>
                <td><div class="level-container"><span class="level-num">2</span><div class="progress-track"><div class="progress-fill fill-2" style="--w: 40%"></div></div></div></td>
              </tr>
              <!-- 3 = Amarillo -->
              <tr class="wow-table-row">
                <td><span class="code-badge">D5</span></td><td class="dim-text">Capacidades y talento</td>
                <td><div class="level-container"><span class="level-num">3</span><div class="progress-track"><div class="progress-fill fill-3" style="--w: 60%"></div></div></div></td>
              </tr>
            </tbody>
          </table>
      </div>
    </div>
  </section>

  <!-- 9. RESULTADOS (Ciclo Actualizado) -->
  <section class="slide" role="group" aria-label="Resultados">
    <h2 class="text-h2">Resultados</h2>
    <div class="results-grid">
        <!-- Madurez -->
        <div class="result-card score-card">
            <h3 class="rc-title"><i class="fas fa-chart-pie"></i> Madurez</h3>
            <div class="big-score">2,8</div>
            <p>56% Global</p>
        </div>
        <!-- Diagnóstico -->
        <div class="result-card">
            <h3 class="rc-title"><i class="fas fa-stethoscope" style="color:var(--green-mid);"></i> Diagnóstico</h3>
            <p class="rc-body">Brechas en gobernanza y modelo operativo.</p>
        </div>
        <!-- Hallazgo -->
        <div class="result-card" style="border-top: 4px solid var(--accent-uninorte);">
            <h3 class="rc-title"><i class="fas fa-lightbulb" style="color:var(--accent-uninorte);"></i> Hallazgo</h3>
            <p class="rc-body">Base formal sólida, debilidad en <strong>operacionalización</strong>.</p>
        </div>
        <!-- Adaptación -->
        <div class="result-card card-adaptation">
             <h3 class="rc-title"><i class="fas fa-sliders" style="color:var(--green-mid);"></i> Adaptación</h3>
             <div class="adapt-grid">
                 <span class="process-badge"><i class="fas fa-users"></i> Roles</span>
                 <span class="process-badge"><i class="fas fa-briefcase"></i> Portafolio</span>
                 <span class="process-badge"><i class="fas fa-shield-alt"></i> Riesgos</span>
             </div>
        </div>

        <!-- Implementación (CICLO ORDENADO) -->
        <div class="result-card bg-panel card-implementation">
            <h3 class="rc-title"><i class="fas fa-sync-alt" style="color:var(--green-mid);"></i> Ciclo de Implementación</h3>
            <div class="cycle-wrapper">
                <svg class="cycle-svg" viewBox="0 0 200 150">
                    <path class="arrow-path" d="M100,20 Q180,60 100,130 Q20,60 100,20" />
                </svg>
                <!-- 1. Gestión del Cambio -->
                <div class="cycle-node node-1">
                    <div class="c-icon"><i class="fas fa-people-group"></i></div><span class="c-text">Gestión del Cambio</span>
                </div>
                <!-- 2. Institucionalizar -->
                <div class="cycle-node node-2">
                    <div class="c-icon"><i class="fas fa-landmark"></i></div><span class="c-text">Institucionalizar Gobernanza</span>
                </div>
                <!-- 3. Fortalecer -->
                <div class="cycle-node node-3">
                    <div class="c-icon"><i class="fas fa-database"></i></div><span class="c-text">Fortalecer Datos</span>
                </div>
            </div>
        </div>
    </div>
  </section>

  <!-- 10. CONCLUSIONES -->
  <section class="slide">
    <h2 class="text-h2">Conclusiones</h2>
    <div class="bento-grid">
        <div class="bento-card bg-deep"><h3 class="bento-title">Viabilidad Sistémica</h3><p class="bento-text">Sistema integrado viable.</p></div>
        <div class="bento-card bg-accent"><h3 class="bento-title">Adaptabilidad</h3><p class="bento-text">Cierre de brechas reales.</p></div>
        <div class="bento-card bg-light"><h3 class="bento-title" style="color:var(--green-deep)">Modelo Replicable</h3><p class="bento-text" style="color:var(--text-main)">Ruta efectiva para públicas.</p></div>
        <div class="bento-card bg-light"><h3 class="bento-title" style="color:var(--green-deep)">Priorización</h3><p class="bento-text" style="color:var(--text-main)">Estructura capacidades clave.</p></div>
        
        <!-- Implementación con Línea de Tiempo -->
        <div class="bento-card span-full" style="justify-content: flex-start;">
             <h3 class="bento-title" style="color:var(--green-deep)">Implementación Gradual & Sostenibilidad</h3>
             <div class="timeline-clean">
                <div class="tl-step">
                    <div class="tl-circle">1</div>
                    <span class="tl-label">Formalizar</span>
                </div>
                <div class="tl-step">
                    <div class="tl-circle">2</div>
                    <span class="tl-label">Desplegar</span>
                </div>
                <div class="tl-step">
                    <div class="tl-circle">3</div>
                    <span class="tl-label">Consolidar</span>
                </div>
             </div>
             <p class="bento-text" style="margin-top: 15px; text-align: center; color: var(--text-muted); font-size: 0.9rem;">
                <i class="fas fa-key" style="color: var(--accent-uninorte);"></i> Clave: Compromiso Directivo + Recursos + Gestión del Cambio
             </p>
        </div>
    </div>
  </section>

  <!-- 11. REFERENCIAS -->
  <section class="slide">
    <h2 class="text-h2">Referencias</h2>
    <div class="reveal">
        <ul class="list-custom">
            <li>Autores y marcos citados en el documento (transformación digital, gobierno, estándares)</li>
            <li>Estándares y marcos (gobierno/gestión TI y arquitectura empresarial)</li>
            <li>Referentes nacionales aplicables al sector público (según el documento)</li>
        </ul>
        <button class="btn-biblio" onclick="openModal()"><i class="fas fa-book-open"></i> Ver Bibliografía Completa</button>
    </div>
  </section>

  <!-- 12. FIN -->
  <section class="slide">
      <div style="height: 100%; display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center;">
          <h1 class="reveal" style="font-size: 6rem; color: var(--green-deep);">FIN</h1>
          <div class="divider reveal" style="width: 100px; background: var(--accent-uninorte); height: 5px; margin: 30px auto;"></div>
          <p class="text-body reveal" style="font-family: var(--font-title); font-size: 2rem; font-style: italic;">Gracias por su atención</p>
      </div>
  </section>

  <!-- CONTROLES -->
  <div class="controls">
    <button class="btn-nav" id="prevBtn"><i class="fas fa-arrow-left"></i></button>
    <div id="slide-counter">1 / 12</div>
    <button class="btn-nav" id="nextBtn"><i class="fas fa-arrow-right"></i></button>
  </div>

  <!-- MODAL BIBLIOGRAFIA -->
  <div class="modal-overlay" id="biblioModal">
      <div class="modal-content">
          <div class="modal-header">
              <h3 class="modal-title">Bibliografía Completa</h3>
              <button class="close-modal" onclick="closeModal()">&times;</button>
          </div>
          <div class="modal-body"><ul class="biblio-list" id="biblio-list-container"></ul></div>
      </div>
  </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', () => {
  const state = { current: 0, slides: document.querySelectorAll('.slide') };
  const ui = { 
    bar: document.getElementById('progressBar'), 
    counter: document.getElementById('slide-counter'),
    prevBtn: document.getElementById('prevBtn'),
    nextBtn: document.getElementById('nextBtn')
  };
  const total = state.slides.length;

  const loadBibliography = async () => {
    try {
        const response = await fetch('bibliography.json');
        const data = await response.json();
        document.getElementById('biblio-list-container').innerHTML = data.map(item => `<li>${item.ref}</li>`).join('');
    } catch (e) {
        document.getElementById('biblio-list-container').innerHTML = '<li>Error cargando bibliografía.</li>';
    }
  };

  const updateSlide = () => {
    state.slides.forEach((s, i) => s.classList.toggle('active', i === state.current));
    ui.bar.style.width = `${((state.current + 1) / total) * 100}%`;
    ui.counter.textContent = `${state.current + 1} / ${total}`;
    ui.prevBtn.disabled = state.current === 0;
    ui.nextBtn.disabled = state.current === total - 1;
  };

  const nextSlide = () => { if(state.current < total - 1) { state.current++; updateSlide(); } };
  const prevSlide = () => { if(state.current > 0) { state.current--; updateSlide(); } };

  document.addEventListener('click', (e) => {
    const btn = e.target.closest('button');
    if (!btn) {
        const modal = document.getElementById('biblioModal');
        if(modal && e.target === modal) modal.classList.remove('open');
        return;
    }
    if (btn.id === 'nextBtn') nextSlide();
    if (btn.id === 'prevBtn') prevSlide();
  });
  
  document.addEventListener('keydown', (e) => {
      if(e.key === 'ArrowRight') nextSlide();
      if(e.key === 'ArrowLeft') prevSlide();
      if(e.key === 'Escape') document.getElementById('biblioModal').classList.remove('open');
  });

  window.openModal = () => document.getElementById('biblioModal').classList.add('open');
  window.closeModal = () => document.getElementById('biblioModal').classList.remove('open');

  updateSlide();
  loadBibliography();
});
</script>
</body>
</html>
